<app-menu></app-menu>

<main class="row my-container">
    <div class="col s2"></div>
    <div class="input-field col s8">
        <i class="material-icons prefix indigo-text">search</i>
        <input id="icon_prefix" type="text" [(ngModel)]="data" (keyup)="searchVideo()">
        <label for="icon_prefix">Rechercher une vidéo youtube</label>
    </div>
    <div class="col s2"></div>

    <div class="col s12 m6 l4" *ngFor="let video of allResult">
        <div class="card">
            <div class="card-image">
                <img [src]="video.snippet.thumbnails.medium.url">
                <button class="btn-floating btn-large waves-effect waves-light indigo" (click)="playVideo(video)">
                <i class="material-icons">play_arrow</i>
                </button>
                <a class="btn-floating btn-large halfway-fab waves-effect waves-light amber -darken-2" (click)="addModal(video)">
                    <i class="material-icons">add</i>
                </a>
            </div>
            <div class="card-content">
                <span class="card-title indigo-text text-darken-3">{{video.snippet.title}}</span>
            </div>
        </div>
    </div>
</main>
<!-- ----------------- modal zone --------------- -->
<!-- modal ajouter -->
<div class="modal" materialize="modal" [materializeActions]="addActions">
    <div class="modal-content">
        <h5 class="center {{addColor}}-text">Ajouter une vidéo à une playlist</h5>
        <form [formGroup]="addForm" (ngSubmit)="ajouterVideo()">
            <div>
                <label for="idPlaylist">Vos Playlists</label>
                <select id="idPlaylist" [(ngModel)]="addVideo.idPlaylist" materialize="material_select" [materializeSelectOptions]="allPlaylist" formControlName="idPlaylist">
                    <option value="">Choisissez une playlist</option>
                    <option *ngFor="let playlist of allPlaylist" class="{{couleur}}-text" [value]="playlist._id">{{playlist.titre}}</option>
                </select>
            </div>
            <div class="centreo">
                <button type="button" class="btn black" (click)="closeModal()">annuler</button>
                <button type="submit" class="btn tooltipped {{addColor}}" [disabled]="!addForm.valid">
                    <i class="material-icons left">done</i>Enregistrer
                </button>
            </div>
        </form>
    </div>
</div>
<!-- modal success -->
<div class="modal  green darken-3" materialize="modal" [materializeActions]="successActions">
    <p class="center-align white-text">La vidéo a été ajouter à la playlist</p>
</div>

<!-- modal play Video -->
<div class="modal play-video" materialize="modal" [materializeActions]="playActions">
    <div class="modal-content">
      <div class="video-container">
        <iframe class="responsive-video" 
          [src]="safeUrl" 
          frameborder="0"
          allowfullscreen>
        </iframe>
      </div>
      <p class="center-align">{{videoToPlay.titre}}</p>
    </div>
  </div>